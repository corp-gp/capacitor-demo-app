(function(){"use strict";/*! Capacitor: https://capacitorjs.com/ - MIT License */const z=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(r,a)=>{n.platforms.set(r,a)},i=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=o,n.setPlatform=i,n},W=(t=>t.CapacitorPlatforms=z(t))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});W.addPlatform,W.setPlatform;var y;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(y||(y={}));class j extends Error{constructor(e,n,o){super(e),this.message=e,this.code=n,this.data=o}}const K=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},V=t=>{var e,n,o,i,r;const a=t.CapacitorCustomPlatform||null,s=t.Capacitor||{},f=s.Plugins=s.Plugins||{},c=t.CapacitorPlatforms,A=()=>a!==null?a.name:K(t),P=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||A,S=()=>P()!=="web",oe=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||S,ie=l=>{const d=T.get(l);return!!(d!=null&&d.platforms.has(P())||F(l))},ae=((o=c==null?void 0:c.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||ie,ce=l=>{var d;return(d=s.PluginHeaders)===null||d===void 0?void 0:d.find(L=>L.name===l)},F=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||ce,le=l=>t.console.error(l),de=(l,d,L)=>Promise.reject(`${L} does not have an implementation of "${d}".`),T=new Map,ue=(l,d={})=>{const L=T.get(l);if(L)return console.warn(`Capacitor plugin "${l}" already registered. Cannot register plugins twice.`),L.proxy;const v=P(),C=F(l);let g;const he=async()=>(!g&&v in d?g=typeof d[v]=="function"?g=await d[v]():g=d[v]:a!==null&&!g&&"web"in d&&(g=typeof d.web=="function"?g=await d.web():g=d.web),g),we=(u,h)=>{var m,p;if(C){const b=C==null?void 0:C.methods.find(w=>h===w.name);if(b)return b.rtype==="promise"?w=>s.nativePromise(l,h.toString(),w):(w,$)=>s.nativeCallback(l,h.toString(),w,$);if(u)return(m=u[h])===null||m===void 0?void 0:m.bind(u)}else{if(u)return(p=u[h])===null||p===void 0?void 0:p.bind(u);throw new j(`"${l}" plugin is not implemented on ${v}`,y.Unimplemented)}},U=u=>{let h;const m=(...p)=>{const b=he().then(w=>{const $=we(w,u);if($){const x=$(...p);return h=x==null?void 0:x.remove,x}else throw new j(`"${l}.${u}()" is not implemented on ${v}`,y.Unimplemented)});return u==="addListener"&&(b.remove=async()=>h()),b};return m.toString=()=>`${u.toString()}() { [capacitor code] }`,Object.defineProperty(m,"name",{value:u,writable:!1,configurable:!1}),m},B=U("addListener"),G=U("removeListener"),me=(u,h)=>{const m=B({eventName:u},h),p=async()=>{const w=await m;G({eventName:u,callbackId:w},h)},b=new Promise(w=>m.then(()=>w({remove:p})));return b.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await p()},b},_=new Proxy({},{get(u,h){switch(h){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return C?me:B;case"removeListener":return G;default:return U(h)}}});return f[l]=_,T.set(l,{name:l,proxy:_,platforms:new Set([...Object.keys(d),...C?[v]:[]])}),_},fe=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||ue;return s.convertFileSrc||(s.convertFileSrc=l=>l),s.getPlatform=P,s.handleError=le,s.isNativePlatform=oe,s.isPluginAvailable=ae,s.pluginMethodNoop=de,s.registerPlugin=fe,s.Exception=j,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},k=(t=>t.Capacitor=V(t))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),E=k.registerPlugin;k.Plugins;class O{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(n);const r=this.windowListeners[e];r&&!r.registered&&this.addWindowListener(r),o&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,o){const i=this.listeners[e];if(!i){if(o){let r=this.retainedEventArguments[e];r||(r=[]),r.push(n),this.retainedEventArguments[e]=r}return}i.forEach(r=>r(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:o=>{this.notifyListeners(n,o)}}}unimplemented(e="not implemented"){return new k.Exception(e,y.Unimplemented)}unavailable(e="not available"){return new k.Exception(e,y.Unavailable)}async removeListener(e,n){const o=this.listeners[e];if(!o)return;const i=o.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(o=>{this.notifyListeners(e,o)}))}}const M=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),H=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class J extends O{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[i,r]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=H(i).trim(),r=H(r).trim(),n[i]=r}),n}async setCookie(e){try{const n=M(e.key),o=M(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${o||""}${i}; path=${r}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}E("CapacitorCookies",{web:()=>new J});const N=async t=>new Promise((e,n)=>{const o=new FileReader;o.onload=()=>{const i=o.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},o.onerror=i=>n(i),o.readAsDataURL(t)}),Q=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,r,a)=>(i[r]=t[e[a]],i),{})},X=(t,e=!0)=>t?Object.entries(t).reduce((o,i)=>{const[r,a]=i;let s,f;return Array.isArray(a)?(f="",a.forEach(c=>{s=e?encodeURIComponent(c):c,f+=`${r}=${s}&`}),f.slice(0,-1)):(s=e?encodeURIComponent(a):a,f=`${r}=${s}`),`${o}&${f}`},"").substr(1):null,Y=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=Q(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[a,s]of Object.entries(t.data||{}))r.set(a,s);n.body=r.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((s,f)=>{r.append(f,s)});else for(const s of Object.keys(t.data))r.append(s,t.data[s]);n.body=r;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class Z extends O{async request(e){const n=Y(e,e.webFetchExtra),o=X(e.params,e.shouldEncodeUrlParams),i=o?`${e.url}?${o}`:e.url,r=await fetch(i,n),a=r.headers.get("content-type")||"";let{responseType:s="text"}=r.ok?e:{};a.includes("application/json")&&(s="json");let f,c;switch(s){case"arraybuffer":case"blob":c=await r.blob(),f=await N(c);break;case"json":f=await r.json();break;case"document":case"text":default:f=await r.text()}const A={};return r.headers.forEach((P,S)=>{A[S]=P}),{data:f,headers:A,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}E("CapacitorHttp",{web:()=>new Z});const I=E("Network",{web:()=>Promise.resolve().then(()=>ne).then(t=>new t.NetworkWeb)}),ee=E("App",{web:()=>Promise.resolve().then(()=>se).then(t=>new t.AppWeb)});window.addEventListener("DOMContentLoaded",async()=>{if((await I.getStatus()).connected)R();else{const e=document.querySelector("[data-header]");e&&(e.textContent="Отсутствует подключение к интернету"),I.addListener("networkStatusChange",n=>{n.connected&&R()})}});async function R(){const t=await ee.getLaunchUrl(),e=(t==null?void 0:t.url.split("example.com").pop())||"";window.location.replace(`https://example.com${e}`)}function D(){const t=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection;let e="unknown";const n=t?t.type||t.effectiveType:null;if(n&&typeof n=="string")switch(n){case"bluetooth":case"cellular":e="cellular";break;case"none":e="none";break;case"ethernet":case"wifi":case"wimax":e="wifi";break;case"other":case"unknown":e="unknown";break;case"slow-2g":case"2g":case"3g":e="cellular";break;case"4g":e="wifi";break}return e}class q extends O{constructor(){super(),this.handleOnline=()=>{const n={connected:!0,connectionType:D()};this.notifyListeners("networkStatusChange",n)},this.handleOffline=()=>{const e={connected:!1,connectionType:"none"};this.notifyListeners("networkStatusChange",e)},typeof window<"u"&&(window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline))}async getStatus(){if(!window.navigator)throw this.unavailable("Browser does not support the Network Information API");const e=window.navigator.onLine,n=D();return{connected:e,connectionType:e?n:"none"}}}const te=new q,ne=Object.freeze(Object.defineProperty({__proto__:null,Network:te,NetworkWeb:q},Symbol.toStringTag,{value:"Module"}));class re extends O{constructor(){super(),this.handleVisibilityChange=()=>{const e={isActive:document.hidden!==!0};this.notifyListeners("appStateChange",e),document.hidden?this.notifyListeners("pause",null):this.notifyListeners("resume",null)},document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}exitApp(){throw this.unimplemented("Not implemented on web.")}async getInfo(){throw this.unimplemented("Not implemented on web.")}async getLaunchUrl(){return{url:""}}async getState(){return{isActive:document.hidden!==!0}}async minimizeApp(){throw this.unimplemented("Not implemented on web.")}}const se=Object.freeze(Object.defineProperty({__proto__:null,AppWeb:re},Symbol.toStringTag,{value:"Module"}))})();
